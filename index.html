<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>POC de CORS</title>
</head>
<body>
  <h1>POC de CORS</h1>

  <button onclick="testarCors()">Testar CORS</button>

  <pre id="resultado"></pre>

  <script>
    function testarCors() {
      const url = "https://api.sharpify.com.br.com/auth/session/current-user";

      fetch(url, {
        method: "GET",
        credentials: "include" 
      })
        .then(async res => {
          const text = await res.text();
          document.getElementById("resultado").textContent =
            "STATUS: " + res.status + "\n\n" +
            "Resposta liberada pelo navegador:\n\n" + text;
        })
        .catch(err => {
          document.getElementById("resultado").textContent =
            "O navegador BLOQUEOU por CORS:\n\n" + err;
        });
    }
  </script>
</body>
</html>
